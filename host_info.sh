#A bash script to get the hostname, local ip address, and public ip address of the system
#To be added: change hostname, change mac-address (both default and user define)
#Author: Deepak Nuli 
#Contact: rajdeep115 at g m a i l  dot c o m

#!/bin/bash

#GET HOSTNAME:
HOST_NAME=$HOSTNAME
echo "Hostname:      $HOST_NAME"
echo ""

#GET ALL INTERFACES: `cat /proc/net/dev | grep ':'| cut -d: -f1`
#source:hxxp://iijean.blogspot.com/2010/02/howto-get-list-of-network-interfaces-in.html
#GET LOCAL IP address of all interfaces

#echo "----Local Interfaces----"
for i in `cat /proc/net/dev | grep ':'| cut -d: -f1`
do
    if [ "$i" = "lo" ]; then
        continue
    fi
    
    LOCAL_IP=`ifconfig $i | grep "inet addr:" | cut -d: -f2 |cut -d' ' -f1`
    LOCAL_MAC=`macchanger -s $i`
    echo "----$i---- "
    echo "IP address:    $LOCAL_IP"
    echo "$LOCAL_MAC"
    echo ""
done
#echo "----Local Interfaces----"
#echo ""

#GET PUBLIC IP ADDRESSES USING ONE OF THE TOOLS: 'wget', 'curl', or 'lynx'
#AND USING ONE OF THE FOLLOWING SITES: 'icanhazip.com', 'ifconfig.me'
IP_GET_COMMANDS=( curl lynx)
SITES=( icanhazip.com ifconfig.me )
IP_GET_METHOD="0"

#METHOD=0: curl
if [ "$IP_GET_METHOD" = "0" ]; then
    PUBLIC_IP=`curl icanhazip.com 2>/dev/null`

    if [ "$PUBLIC_IP" = "" ]; then
        PUBLIC_IP=`curl ifconfig.me 2>/dev/null`
    fi
fi

#METHOD=1: lynx
if [ "$IP_GET_METHOD" = "1" ]; then
    PUBLIC_IP=`lynx -dump icanhazip.com| grep '[0-9.]*' -o`

    if [ "$PUBLIC_IP" = "" ]; then
        PUBLIC_IP=`lynx -dump ifconfig.me|grep '<ip_addr>'| sed 's/[a-z<>_\/ ]//g'`
    fi
fi

#echo "----Public IP----"
echo "Public IP:     $PUBLIC_IP"
#echo "----Public IP----"



